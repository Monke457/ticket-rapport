<div th:fragment="user-form(edit)" xmlns:th="http://www.w3.org/1999/xhtml">
    <input type="hidden" th:value="${referer}" th:name="referer">
    <div class="mb-3">
        <label class="form-label" th:for="*{firstname}">Firstname</label>
        <input class="form-control" th:field="*{firstname}" th:classappend="${#fields.hasErrors('firstname') ? 'input-error' : ''}">
        <div th:replace="~{fragments/forms/error-alert :: error-alert('firstname')}"></div>
    </div>
    <div class="mb-3">
        <label class="form-label" th:for="*{lastname}">Lastname</label>
        <input class="form-control" th:field="*{lastname}" th:classappend="${#fields.hasErrors('lastname') ? 'input-error' : ''}">
        <div th:replace="~{fragments/forms/error-alert :: error-alert('lastname')}"></div>
    </div>
    <div class="mb-3">
        <label class="form-label" th:for="*{email}">* Email</label>
        <input class="form-control" th:field="*{email}" th:classappend="${#fields.hasErrors('email') ? 'input-error' : ''}">
        <div th:replace="~{fragments/forms/error-alert :: error-alert('email')}"></div>
    </div>
    <div class="mb-3">
        <label class="form-label" th:for="*{role}">* Role</label>
        <select class="form-select" th:field="*{role.id}" th:classappend="${#fields.hasErrors('role.id') ? 'input-error' : ''}">
            <option th:if="*{role.id == null || role.id == ''}" value="null">Select Role</option>
            <option th:each="role: ${roles}" th:value="${role.id}" th:text="${role.description}"></option>
        </select>
        <div class="alert alert-info mt-1" th:if="${edit}">The user must re-log for role changes to take full effect</div>
        <div class="alert alert-warning mt-1" th:if="${#fields.hasErrors('role.id')}">Please select a role</div>
    </div>
</div>
